"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[3092],{33092:function(e,n,r){r.r(n),r.d(n,{default:function(){return G}});var t=r(4942),a=r(1413),o=r(74165),i=r(15861),c=r(29439),s=r(24193),l=r(71263),d=r(1550),u=r(24631),p=r(41727),x=r(47131),f=r(40894),h=r(93433),m=r(66244),g=r(51405),_=r(78925),Z=r(48737),v=r(46417);var b=function(e){var n=e.data,r=e.handleCloseExportar;return(0,v.jsxs)(g.Z,{onClick:function(){!function(){var e=n.map((function(e){return[e.key,e.duca_No_Duca,e.duca_No_Correlativo_Referencia,e.nombre_pais_procedencia,e.nombre_Aduana_Registro]})),r=Z.P6.aoa_to_sheet([["No.","No. de DUCA","No. correlativo o referencia","Pa\xeds de procedencia","Aduana de Registro"]].concat((0,h.Z)(e))),t=Z.P6.book_new();Z.P6.book_append_sheet(t,r,"Sheet1");var a=Z.cW(t,{bookType:"xlsx",type:"array"}),o=new Blob([a],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"});(0,_.saveAs)(o,"Listado_de_DUCAS.xlsx")}(),r()},style:{fontSize:"15px",marginTop:"5px",marginBottom:"5px"},children:[(0,v.jsx)(m.Z,{style:{fontSize:"20px"}}),"\xa0\xa0Archivo Excel"]})},C=r(47313),j=r(76278),y=r(31881),N=r.n(y),k=r(39284),S=r.n(k),A=r(11593),w=r(9098);S().vfs=A.I.vfs;var D=function(e){var n=e.data,r=e.handleCloseExportar,t=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var r,t,a,i,c,s,l;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="A4",t=[40,60,40,60],"https://i.ibb.co/MPn5hrr/Captura.png",a=w.Z.formatFechaHora(new Date),i=JSON.parse(localStorage.getItem("user")),e.prev=5,e.next=8,N().get("https://i.ibb.co/MPn5hrr/Captura.png",{responseType:"blob"});case 8:c=e.sent,s=c.data,(l=new FileReader).onload=function(){var e={content:[{image:l.result,margin:[-60,-60],width:600,height:45},{text:"DUCA(Declaraci\xf3n \xdanica Centroamericana)",style:"header",margin:[20,80,0,20]}],styles:{header:{fontSize:26,bold:!0,color:"black",alignment:"center",underline:!0},tableHeader:{fontSize:14,bold:!0,color:"black",alignment:"center",fillColor:"#E8D8FF"},footer:{fontSize:10,alignment:"center"}},defaultStyle:{fontSize:12},footer:function(e,n){return{columns:[{text:"Generado por: ".concat(i.data.displayName),style:"footer"},{text:"P\xe1gina ".concat(e.toString()," de ").concat(n),style:"footer"},{text:"Fecha: ".concat(a.toString().slice(0,10)),style:"footer"}],margin:[0,20]}},pageMargins:t,pageBreakBefore:function(e,n,a,o){return e.y+e.height>r[1]-t[3]}};e.content.push({table:{widths:["auto","auto","auto","auto","*"],headerRows:1,body:[[{text:"No.",style:"tableHeader"},{text:"No. de DUCA",style:"tableHeader"},{text:"No. correlativo o referencia",style:"tableHeader"},{text:"Pa\xeds de procedencia",style:"tableHeader"},{text:"Aduana de Registro",style:"tableHeader"}]].concat((0,h.Z)(n.map((function(e){return[e.key||"No disponible",e.duca_No_Duca||"No disponible",e.duca_No_Correlativo_Referencia||"No disponible",e.nombre_pais_procedencia||"No disponible",e.nombre_Aduana_Registro||"No disponible"]})))),alignment:"center"}}),S().createPdf(e).getDataUrl((function(e){window.open().document.write('<iframe src="'.concat(e,'" width="100%" height="100%"></iframe>'))}))},l.readAsDataURL(s),e.next=17;break;case 15:e.prev=15,e.t0=e.catch(5);case 17:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(){return e.apply(this,arguments)}}();return(0,v.jsxs)(g.Z,{onClick:function(){t(),r()},style:{fontSize:"15px",marginTop:"5px",marginBottom:"5px"},children:[(0,v.jsx)(j.Z,{style:{fontSize:"20px"}}),"\xa0\xa0Archivo PDF"]})},I=r(280),R=r(66106),E=r(61113),z=r(73428),P=r(93405),B=r(16957),F=r(35898),T=r(57983),U=r(58467),H=r(521),L=r(88797),M=r(7066),O=r(82047),V=r(28155),W=r(89145);var G=function(){var e=(0,U.s0)(),n=(0,C.useState)(""),r=(0,c.Z)(n,2),h=r[0],m=r[1],_=(0,C.useState)({}),Z=(0,c.Z)(_,2),j=Z[0],y=Z[1],N=(0,C.useState)({}),k=(0,c.Z)(N,2),S=k[0],A=k[1],w=C.useState(10),G=(0,c.Z)(w,2),q=G[0],J=G[1],K=(0,C.useState)([]),Y=(0,c.Z)(K,2),Q=Y[0],X=Y[1],$=(0,C.useState)([]),ee=(0,c.Z)($,2),ne=ee[0],re=ee[1],te=(0,M.Z)(),ae={filename:"Ducas",fieldSeparator:",",quoteStrings:'"',decimalSeparator:".",showLabels:!0,useBom:!0,useKeysAsHeaders:!1,headers:[{label:"No."},{label:"No. de DUCA"},{label:"No. correlativo o referencia"},{label:"Pa\xeds de procedencia"},{label:"Aduana de Registro"}].map((function(e){return e.label}))},oe=new f.ExportToCsv(ae),ie=(0,C.useState)([]),ce=(0,c.Z)(ie,2),se=ce[0],le=ce[1],de=function(){var e=(0,i.Z)((0,o.Z)().mark((function e(){var n;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,le([]),X([]),e.next=5,te.ListadoDuca();case 5:return n=e.sent,X(n),n.length>0?le(n):le(null),e.t0=re,e.next=11,te.ExportData();case 11:e.t1=e.sent,(0,e.t0)(e.t1),e.next=18;break;case 15:e.prev=15,e.t2=e.catch(0),le(null);case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}(),ue=function(e){y((function(n){return(0,a.Z)((0,a.Z)({},n),{},(0,t.Z)({},e,null))}))},pe=function(){A((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,t.Z)({},"menu-exportar",null))}))};C.useEffect((function(){localStorage.removeItem("duca_Id"),de()}),[]);var xe=[{title:"No.",dataIndex:"id",key:"id",sorter:function(e,n){return e.id-n.id}},{title:"No. de DUCA",dataIndex:"duca_No_Duca",key:"duca_No_Duca",sorter:function(e,n){return e.duca_No_Duca.localeCompare(n.duca_No_Duca)}},{title:"No. correlativo o referencia",dataIndex:"duca_No_Correlativo_Referencia",key:"duca_No_Correlativo_Referencia",sorter:function(e,n){return e.duca_No_Correlativo_Referencia.localeCompare(n.duca_No_Correlativo_Referencia)}},{title:"Pa\xeds de procedencia",dataIndex:"nombre_pais_procedencia",key:"nombre_pais_procedencia",sorter:function(e,n){return e.nombre_pais_procedencia.localeCompare(n.nombre_pais_procedencia)}},{title:"Aduana de Registro",dataIndex:"nombre_Aduana_Registro",key:"nombre_Aduana_Registro",sorter:function(e,n){return e.duca_FechaVencimiento.localeCompare(n.duca_FechaVencimiento)}},{title:"Acciones",key:"operation",render:function(e){return(0,v.jsx)("div",{children:(0,v.jsxs)(F.Z,{direction:"row",spacing:1,children:[(0,v.jsx)(s.Z,{"aria-controls":"menu-".concat(e.duca_Id),"aria-haspopup":"true",onClick:function(n){return r=n,o=e.duca_Id,void y((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,t.Z)({},o,r.currentTarget))}));var r,o},variant:"contained",style:{borderRadius:"10px",backgroundColor:"#634A9E",color:"white"},startIcon:(0,v.jsx)(l.Z,{children:"menu"}),children:"Opciones"}),(0,v.jsxs)(O.Z,{id:"menu-".concat(e.duca_Id),anchorEl:j[e.duca_Id],keepMounted:!0,open:Boolean(j[e.duca_Id]),onClose:function(){return ue(e.duca_Id)},children:[!e.duca_Finalizado&&(0,v.jsxs)(g.Z,{onClick:function(){return function(e){H.Z.push("/Duca/editar",e),localStorage.setItem("duca_Id",e.duca_Id),ue(e.id)}(e)},children:[(0,v.jsx)(l.Z,{children:"edit"}),"\xa0\xa0Editar"]}),(0,v.jsxs)(g.Z,{onClick:function(){return n=e.duca_Id,H.Z.push("/Duca/Reporte",n),void ue(n);var n},children:[(0,v.jsx)(l.Z,{children:"print"}),"\xa0\xa0Generar Reporte"]}),e.duca_Finalizado&&(0,v.jsxs)(g.Z,{onClick:function(){return function(e){H.Z.push("/BoletinDePago/crear",e),ue(e.id)}(e)},children:[(0,v.jsx)(l.Z,{children:"article"}),"\xa0\xa0Generar Bolet\xedn de Pago"]})]})]})},e.duca_Id)}}],fe=["id","duca_No_Duca","duca_No_Correlativo_Referencia","nombre_pais_procedencia","duca_FechaVencimiento"],he=Q.filter((function(e){if(""===h)return!0;for(var n=0,r=Object.entries(e);n<r.length;n++){var t=(0,c.Z)(r[n],2),a=t[0],o=t[1];if(fe.includes(a)){var i="number"===typeof o?o.toString():o.toString().toLowerCase(),s="string"===typeof h?h.toString():h.toLowerCase();if(i.includes(s))return!0}}return!1})).reverse();return(0,v.jsxs)(z.Z,{sx:{minWidth:275,margin:"40px"},children:[(0,v.jsx)(B.Z,{component:"img",height:"200",image:"https://i.ibb.co/Wpq35kR/DUCA-DECLARACI-N-NICA-CENTROAMERICANA.png",alt:"Encabezado de la carta"}),(0,v.jsxs)(P.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[(0,v.jsxs)(F.Z,{direction:"row",spacing:1,children:[(0,v.jsx)(s.Z,{startIcon:(0,v.jsx)(l.Z,{children:"add"}),variant:"contained",color:"primary",style:{borderRadius:"10px"},sx:{backgroundColor:"#634A9E",color:"white","&:hover":{backgroundColor:"#6e52ae"}},onClick:function(){e("/Duca/crear")},children:"Nuevo"}),(0,v.jsxs)(s.Z,{startIcon:(0,v.jsx)(l.Z,{children:"upload"}),onClick:function(e){return n=e,r="menu-exportar",void A((function(e){return(0,a.Z)((0,a.Z)({},e),{},(0,t.Z)({},r,n.currentTarget))}));var n,r},sx:{backgroundColor:"#dcc25a",color:"white","&:hover":{backgroundColor:"#dcc25a"}},style:{borderRadius:"10px"},children:[(0,v.jsx)(E.Z,{children:"Exportar"}),(0,v.jsx)(R.Z,{})]}),(0,v.jsx)("div",{children:(0,v.jsxs)(O.Z,{id:"menu-exportar",anchorEl:S["menu-exportar"],open:Boolean(S["menu-exportar"]),onClose:function(){return pe()},keepMounted:!0,children:[(0,v.jsxs)(g.Z,{onClick:function(){!function(){try{oe.generateCsv(ne)}catch(e){}}(),pe()},style:{fontSize:"15px",marginTop:"5px",marginBottom:"5px"},children:[(0,v.jsx)(I.Z,{style:{fontSize:"20px"}}),"\xa0\xa0Archivo CSV"]}),(0,v.jsx)(D,{data:ne,handleCloseExportar:pe}),(0,v.jsx)(b,{data:ne,handleCloseExportar:pe})]})},"menu-exportar")]}),(0,v.jsxs)(F.Z,{direction:"row",spacing:1,children:[(0,v.jsx)("label",{className:"mt-8",children:"Filas por p\xe1gina:"}),(0,v.jsx)(d.Z,{sx:{minWidth:50},size:"small",children:(0,v.jsxs)(L.Z,{value:q,onChange:function(e){J(e.target.value)},children:[(0,v.jsx)(g.Z,{value:10,children:"10"}),(0,v.jsx)(g.Z,{value:20,children:"20"}),(0,v.jsx)(g.Z,{value:30,children:"30"})]})}),(0,v.jsx)(u.Z,{style:{borderRadius:"10px"},placeholder:"Buscar",value:h,onChange:function(e){m(e.target.value)},size:"small",InputProps:{startAdornment:(0,v.jsx)(p.Z,{position:"start",children:(0,v.jsx)(x.Z,{edge:"start",children:(0,v.jsx)(T.Z,{})})})}})]})]}),(0,v.jsx)("div",{className:"center",style:{width:"95%",margin:"auto"},children:(0,v.jsx)(V.Z,{locale:{triggerDesc:"Ordenar descendente",triggerAsc:"Ordenar ascendente",cancelSort:"Cancelar",emptyText:(0,W.Z)(se)},columns:xe,dataSource:he,size:"small",pagination:{pageSize:q,showSizeChanger:!1,className:"custom-pagination"}})})]})}},89145:function(e,n,r){r(47313);var t=r(85281),a=r(53191),o=r(46417);n.Z=function(e){var n=(0,o.jsxs)(a.Z,{container:!0,spacing:2,display:"flex",justifyContent:"center",alignContent:"center",marginY:"10px",children:[(0,o.jsx)(a.Z,{item:!0,xs:12,children:(0,o.jsx)(t.Z,{style:{color:"#634a9e"}})}),(0,o.jsx)(a.Z,{item:!0,xs:12,children:"Cargando..."})]});return null==e||e.length>0?null:n}}}]);