"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[5236],{45236:function(e,r,n){n.r(r),n.d(r,{default:function(){return A}});var t=n(1413),a=n(74165),o=n(15861),i=n(29439),c=n(47313),s=n(1550),u=n(5178),d=n(75627),l=n(73428),m=n(16957),p=n(9019),f=n(24631),h=n(24193),v=n(71263),x=n(3463),g=n(62563),b=n(52767),Z=n(75265),k=n(31881),y=n.n(k),j=n(9098);var C=function(){var e=JSON.parse(localStorage.getItem("user")),r={XApiKey:j.Z.extraerToken()},n=y().create({baseURL:"https://practicaacademia.somee.com/api/DocumentosSanciones/",headers:r});function t(){return(t=(0,o.Z)((0,a.Z)().mark((function e(){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.get("Listar");case 2:return r=e.sent,e.abrupt("return",r.data.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(){return(i=(0,o.Z)((0,a.Z)().mark((function r(t,o){var i,c;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return i={dosa_Id:0,dosa_NombreDocumento:t.nombreArchivo,dosa_UrlDocumento:o,usua_UsuarioCreacion:e.uuid,dosa_FechaCreacion:new Date},r.next=3,n.post("Insertar",i);case 3:return c=r.sent,r.abrupt("return",c);case 5:case"end":return r.stop()}}),r)})))).apply(this,arguments)}return{getDocumentosSanciones:function(){return t.apply(this,arguments)},guardarUrlArchivo:function(e,r){return i.apply(this,arguments)}}},w=n(46417),S=b.S1("AkGIMOlfhTTOX2REgcOtWz");var A=function(){var e=C(),r=(0,c.useState)(),n=(0,i.Z)(r,2),b=n[0],k=n[1],y=(0,c.useState)([]),j=(0,i.Z)(y,2),A=j[0],M=j[1],D=(0,c.useState)(null),I=(0,i.Z)(D,2),_=I[0],P=I[1],R=function(){var r=(0,o.Z)((0,a.Z)().mark((function r(){var n;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e.getDocumentosSanciones();case 2:n=r.sent,M(n);case 4:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();(0,c.useEffect)((function(){R()}),[]),(0,c.useEffect)((function(){A.length>0&&P(A[0].dosa_UrlDocumento)}),[A]);var N=x.Ry().shape({nombreArchivo:x.Z_().nullable().required()}),O=(0,d.cI)({defaultValues:{nombreArchivo:""},mode:"all",resolver:(0,g.X)(N)}),U=O.handleSubmit,W=O.reset,z=O.control,E=O.formState,T=O.watch,F=(O.setValue,T()),V=E.isValid,L=(E.dirtyFields,E.errors),X=function(){var r=(0,o.Z)((0,a.Z)().mark((function r(){var n,t;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0===b){r.next=21;break}if(!E.isValid){r.next=19;break}if("application/pdf"!==b.type){r.next=18;break}return r.next=5,S.upload(b,{},{filename:"".concat(F.nombreArchivo,".pdf")});case 5:if(null==(n=r.sent).url){r.next=15;break}return P(n.url),r.next=10,e.guardarUrlArchivo(F,n.url);case 10:null!=(t=r.sent).data.data&&("1"===t.data.data.messageStatus?(0,Z.xO)():(0,Z.bW)()),W(),r.next=16;break;case 15:(0,Z.bW)();case 16:r.next=19;break;case 18:(0,Z.go)("Advertencia. Debe seleccionar un archivo PDF.");case 19:r.next=22;break;case 21:(0,Z.go)("Advertencia. Debe seleccionar un archivo para realizar la operaci\xf3n.");case 22:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();return(0,w.jsxs)(l.Z,{sx:{minWidth:275,margin:"40px"},children:[(0,w.jsx)(m.Z,{component:"img",height:"200",className:"mb-24",image:"https://i.ibb.co/zfqvS4j/documentos-de-sanciones.png",alt:"Encabezado de la carta"}),(0,w.jsx)("form",{onSubmit:U((function(e){X()})),children:(0,w.jsxs)(p.ZP,{container:!0,style:{marginBottom:"20px"},spacing:3,children:[(0,w.jsx)(p.ZP,{item:!0,xs:4,children:(0,w.jsxs)(s.Z,{style:{marginLeft:"32px"},fullWidth:!0,children:[(0,w.jsx)(u.Z,{error:!!L.nombreArchivo,children:"Nombre del documento:"}),(0,w.jsx)(d.Qr,{name:"nombreArchivo",control:z,render:function(e){var r=e.field;return(0,w.jsx)(f.Z,(0,t.Z)((0,t.Z)({},r),{},{value:F.nombreArchivo,error:!!L.nombreArchivo}))}})]})}),(0,w.jsx)(p.ZP,{item:!0,xs:.5}),(0,w.jsx)(p.ZP,{item:!0,xs:4,children:(0,w.jsx)("input",{type:"file",accept:"application/pdf",onChange:function(e){e.target.files&&k(e.target.files[0])},style:{marginTop:"30px"}})}),(0,w.jsx)(p.ZP,{item:!0,xs:3.2,children:(0,w.jsx)(h.Z,{fullWidth:!0,startIcon:(0,w.jsx)(v.Z,{children:"upload"}),variant:"contained",color:"primary",style:{borderRadius:"10px",marginTop:"30px"},sx:{backgroundColor:"#634A9E",color:"white","&:hover":{backgroundColor:"#6e52ae"}},type:"submit",onClick:function(){V||(0,Z.go)("Advertencia. Debe ingresar un nombre para el documento")},children:"Subir Documento"})})]})}),(0,w.jsx)(p.ZP,{container:!0,spacing:3,children:(0,w.jsx)(p.ZP,{item:!0,xs:12,children:(0,w.jsx)("iframe",{src:_,style:{width:"100%",height:"100vh"}})})})]})}},16957:function(e,r,n){n.d(r,{Z:function(){return x}});var t=n(63366),a=n(87462),o=n(47313),i=n(83061),c=n(21921),s=n(77342),u=n(88564),d=n(32298);function l(e){return(0,d.Z)("MuiCardMedia",e)}(0,n(77430).Z)("MuiCardMedia",["root","media","img"]);var m=n(46417),p=["children","className","component","image","src","style"],f=(0,u.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:function(e,r){var n=e.ownerState,t=n.isMediaComponent,a=n.isImageComponent;return[r.root,t&&r.media,a&&r.img]}})((function(e){var r=e.ownerState;return(0,a.Z)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},r.isMediaComponent&&{width:"100%"},r.isImageComponent&&{objectFit:"cover"})})),h=["video","audio","picture","iframe","img"],v=["picture","img"],x=o.forwardRef((function(e,r){var n=(0,s.Z)({props:e,name:"MuiCardMedia"}),o=n.children,u=n.className,d=n.component,x=void 0===d?"div":d,g=n.image,b=n.src,Z=n.style,k=(0,t.Z)(n,p),y=-1!==h.indexOf(x),j=!y&&g?(0,a.Z)({backgroundImage:'url("'.concat(g,'")')},Z):Z,C=(0,a.Z)({},n,{component:x,isMediaComponent:y,isImageComponent:-1!==v.indexOf(x)}),w=function(e){var r=e.classes,n={root:["root",e.isMediaComponent&&"media",e.isImageComponent&&"img"]};return(0,c.Z)(n,l,r)}(C);return(0,m.jsx)(f,(0,a.Z)({className:(0,i.default)(w.root,u),as:x,role:!y&&g?"img":void 0,ref:r,style:j,ownerState:C,src:y?g||b:void 0},k,{children:o}))}))}}]);