"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[6342],{86342:function(e,r,t){t.r(r);var n=t(1413),a=t(74165),o=t(15861),i=t(29439),s=t(73428),c=t(93405),u=t(16957),d=t(19536),l=t(66212),p=t(1550),_=t(24631),m=t(41727),f=t(71263),x=t(25298),h=t(24193),Z=t(47313),v=t(9019),I=t(5178),b=t(521),g=t(3463),j=t(75627),C=t(62563),k=(t(89145),t(77453),t(88477),t(68673)),y=t(38384),w=(t(51111),t(88282),t(75265)),L=t(3813),E=t(46417);r.default=function(){var e=(0,k.Z)(),r=(0,y.Z)(),t=(0,Z.useState)([]),O=(0,i.Z)(t,2),D=(O[0],O[1]),P=(0,Z.useState)([]),S=(0,i.Z)(P,2),F=S[0],U=S[1],A=(0,Z.useState)([]),M=(0,i.Z)(A,2),N=M[0],q=M[1],R=(0,Z.useState)([]),W=(0,i.Z)(R,2),Q=W[0],V=W[1],T=(0,Z.useState)([]),H=(0,i.Z)(T,2),B=H[0],K=H[1],z=(0,Z.useState)(!0),J=(0,i.Z)(z,2),X=J[0],G=J[1],Y=(0,Z.useState)(!1),$=(0,i.Z)(Y,2),ee=$[0],re=$[1],te=function(){var r=(0,o.Z)((0,a.Z)().mark((function r(){var t;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.Materiales();case 3:t=r.sent,U(t),r.next=9;break;case 7:r.prev=7,r.t0=r.catch(0);case 9:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}}(),ne=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.UnidadMedida();case 3:t=e.sent,V(t),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ae=function(){var r=(0,o.Z)((0,a.Z)().mark((function r(){var t;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.Areas();case 3:t=r.sent,K(t),r.next=9;break;case 7:r.prev=7,r.t0=r.catch(0);case 9:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}}(),oe=function(){var r=(0,o.Z)((0,a.Z)().mark((function r(){var t;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.Colores();case 3:t=r.sent,q(t),r.next=9;break;case 7:r.prev=7,r.t0=r.catch(0);case 9:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}}(),ie=function(){var r=(0,o.Z)((0,a.Z)().mark((function r(){var t;return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.PedidoOrdenDetalle2();case 3:t=r.sent,D(t),r.next=9;break;case 7:r.prev=7,r.t0=r.catch(0);case 9:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}}(),se=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,n,o,i;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=xe(),e.prev=1,!(n=t.prod_Id)){e.next=14;break}return e.next=6,r.getPedidosOrdenDetallesInfo(n);case 6:o=e.sent,i=F.find((function(e){return e.value===o[0].mate_Id})),me("mate_Id",i),me("cantidadIngresada",o[0].prod_Cantidad),G(!0),re(!0),e.next=17;break;case 14:me("mate_Id",null),me("cantidadIngresada",""),re(!1);case 17:e.next=25;break;case 19:e.prev=19,e.t0=e.catch(1),me("mate_Id",null),me("cantidadIngresada",""),G(!1),re(!1);case 25:case"end":return e.stop()}}),e,null,[[1,19]])})));return function(){return e.apply(this,arguments)}}();(0,Z.useEffect)((function(){te(),ne(),ae(),oe(),ie(),fe("prod_Id")}),[X]);var ce=g.Ry().shape({prod_Id:g.Z_().test("valido","El numero de pedido orden detalle no existe",(function(){return X})),lote_Stock:g.Rx().min(1).max(2147483647).required(""),mate_Id:g.Ry().required(""),lote_Observaciones:g.Z_().required(""),lote_CodigoLote:g.Z_().required(""),tipa_Id:g.Ry().required(""),unme_Id:g.Ry().required(""),colr_Id:g.Ry().required("")}),ue=(0,j.cI)({defaultValues:{prod_Id:"",lote_CodigoLote:"",cantidadIngresada:"",mate_Id:null,lote_Observaciones:"",tipa_Id:null,unme_Id:null,colr_Id:null},mode:"all",resolver:(0,C.X)(ce)}),de=ue.handleSubmit,le=(ue.register,ue.reset,ue.control),pe=ue.watch,_e=ue.formState,me=ue.setValue,fe=ue.trigger,xe=ue.getValues,he=_e.isValid,Ze=(_e.dirtyFields,_e.errors),ve=(_e.touchedFields,pe()),Ie=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!he){e.next=12;break}if(!(ve.cantidadIngresada<=0)){e.next=6;break}(0,w.ov)("Error. La cantidad que ingres\xf3 no puede ser igual o menor 0."),e.next=10;break;case 6:return e.next=8,r.crear(ve);case 8:"1"===(t=e.sent).data.data.messageStatus?((0,w.ys)(),b.Z.push("/Lotes/Index")):t.data.data.messageStatus.includes("UNIQUE")&&(0,w.go)("Advertencia. El codigo del lote ya existe.");case 10:e.next=13;break;case 12:(0,w.KV)();case 13:e.next=17;break;case 15:e.prev=15,e.t0=e.catch(0);case 17:case"end":return e.stop()}}),e,null,[[0,15]])})));return function(){return e.apply(this,arguments)}}();return(0,E.jsx)("form",{onSubmit:de((function(e){})),children:(0,E.jsxs)(s.Z,{sx:{minWidth:275,margin:"40px"},children:[(0,E.jsx)(u.Z,{component:"img",height:"200",image:"https://i.ibb.co/w4zKLJs/LOTES.png",alt:"Encabezado de la carta"}),(0,E.jsx)(c.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:(0,E.jsxs)(v.ZP,{container:!0,spacing:3,children:[(0,E.jsx)(v.ZP,{item:!0,xs:12,style:{marginBottom:"30px"},children:(0,E.jsx)(d.Z,{style:{marginTop:"0px"},children:(0,E.jsx)(l.Z,{label:"Agregar lote"})})}),(0,E.jsx)(v.ZP,{item:!0,xs:6,children:(0,E.jsx)(j.Qr,{render:function(e){var r=e.field;return(0,E.jsxs)(p.Z,{error:!!Ze.lote_CodigoLote,fullWidth:!0,children:[(0,E.jsx)(I.Z,{children:"C\xf3digo Lote:"}),(0,E.jsx)(_.Z,(0,n.Z)((0,n.Z)({},r),{},{error:!!Ze.lote_CodigoLote,variant:"outlined",inputprops:{startAdornment:(0,E.jsx)(m.Z,{position:"start"})}}))]})},name:"lote_CodigoLote",control:le})}),(0,E.jsx)(v.ZP,{item:!0,xs:6,children:(0,E.jsx)(j.Qr,{render:function(e){var r,t=e.field;return(0,E.jsxs)(p.Z,{error:!!Ze.prod_Id,fullWidth:!0,children:[(0,E.jsx)(I.Z,{children:"N\xb0 de detalle de orden de pedido:"}),(0,E.jsx)(_.Z,(0,n.Z)((0,n.Z)({},t),{},{error:!!Ze.prod_Id,helperText:null===Ze||void 0===Ze||null===(r=Ze.prod_Id)||void 0===r?void 0:r.message,variant:"outlined",fullWidth:!0,onBlur:se,placeholder:"...",type:"number",InputProps:{startAdornment:(0,E.jsx)(m.Z,{position:"start",children:(0,E.jsx)(f.Z,{style:{color:"#DAD8D8"},children:"search"})})}}))]})},name:"prod_Id",control:le})}),(0,E.jsx)(v.ZP,{item:!0,xs:6,children:(0,E.jsx)(j.Qr,{render:function(e){var r=e.field;return(0,E.jsxs)(p.Z,{fullWidth:!0,children:[(0,E.jsx)(I.Z,{error:!!Ze.mate_Id,children:"Material:"}),(0,E.jsx)(x.Z,(0,n.Z)((0,n.Z)({},r),{},{disablePortal:!0,isOptionEqualToValue:function(e,r){return e.value===r.value},disableClearable:!0,options:F,disabled:ee,value:ve.mate_Id,onChange:function(e,r){me("mate_Id",r)},renderInput:function(e){return(0,E.jsx)(_.Z,(0,n.Z)((0,n.Z)({},e),{},{error:!!Ze.mate_Id,InputLabelProps:{shrink:!0}}))}}))]})},name:"mate_Id",control:le})}),(0,E.jsx)(v.ZP,{item:!0,xs:6,children:(0,E.jsx)(j.Qr,{render:function(e){var r=e.field;return(0,E.jsxs)(p.Z,{error:!!Ze.cantidadIngresada,fullWidth:!0,children:[(0,E.jsx)(I.Z,{children:"Cantidad ingresada de material:"}),(0,E.jsx)(_.Z,(0,n.Z)((0,n.Z)({},r),{},{error:!!Ze.cantidadIngresada,type:"number",variant:"outlined",inputprops:{startAdornment:(0,E.jsx)(m.Z,{position:"start"})}}))]})},name:"cantidadIngresada",control:le})}),(0,E.jsx)(v.ZP,{item:!0,xs:6,children:(0,E.jsx)(j.Qr,{render:function(e){var r=e.field;return(0,E.jsxs)(p.Z,{error:"0"===r.value,fullWidth:!0,children:[(0,E.jsx)(I.Z,{error:!!Ze.tipa_Id,children:"\xc1rea de embalaje:"}),(0,E.jsx)(x.Z,(0,n.Z)((0,n.Z)({},r),{},{disablePortal:!0,isOptionEqualToValue:function(e,r){return e.value===r.value},disableClearable:!0,options:B,value:ve.tipa_Id,onChange:function(e,r){me("tipa_Id",r)},renderInput:function(e){return(0,E.jsx)(_.Z,(0,n.Z)((0,n.Z)({},e),{},{error:!!Ze.tipa_Id,InputLabelProps:{shrink:!0}}))}}))]})},name:"tipa_Id",control:le})}),(0,E.jsx)(v.ZP,{item:!0,xs:6,children:(0,E.jsx)(j.Qr,{render:function(e){var r=e.field;return(0,E.jsxs)(p.Z,{error:!!Ze.lote_Observaciones,fullWidth:!0,children:[(0,E.jsx)(I.Z,{children:"Observaciones:"}),(0,E.jsx)(_.Z,(0,n.Z)((0,n.Z)({},r),{},{error:!!Ze.lote_Observaciones,variant:"outlined",inputprops:{startAdornment:(0,E.jsx)(m.Z,{position:"start"})}}))]})},name:"lote_Observaciones",control:le})}),(0,E.jsx)(v.ZP,{item:!0,xs:6,children:(0,E.jsx)(j.Qr,{render:function(e){var r=e.field;return(0,E.jsxs)(p.Z,{error:"0"===r.value,fullWidth:!0,children:[(0,E.jsx)(I.Z,{error:!!Ze.colr_Id,children:"Color:"}),(0,E.jsx)(x.Z,(0,n.Z)((0,n.Z)({},r),{},{disablePortal:!0,isOptionEqualToValue:function(e,r){return e.value===r.value},disableClearable:!0,options:N,renderOption:function(e,r){return(0,E.jsxs)("li",(0,n.Z)((0,n.Z)({},e),{},{children:[(0,E.jsx)(L.Z,{style:{color:r.color}}),r.label]}))},onChange:function(e,r){me("colr_Id",r)},renderInput:function(e){return(0,E.jsx)(E.Fragment,{children:(0,E.jsx)(_.Z,(0,n.Z)((0,n.Z)({},e),{},{error:!!Ze.colr_Id,InputLabelProps:{shrink:!0},InputProps:(0,n.Z)((0,n.Z)({},e.InputProps),{},{startAdornment:(0,E.jsx)(m.Z,{position:"end",children:(0,E.jsx)(L.Z,{style:{color:ve.colr_Id?ve.colr_Id.color:"white"}})})})}))})}}))]})},name:"colr_Id",control:le})}),(0,E.jsx)(v.ZP,{item:!0,xs:6,children:(0,E.jsx)(j.Qr,{render:function(e){var r=e.field;return(0,E.jsxs)(p.Z,{error:"0"===r.value,fullWidth:!0,children:[(0,E.jsx)(I.Z,{error:!!Ze.unme_Id,children:"Unidad de medida:"}),(0,E.jsx)(x.Z,(0,n.Z)((0,n.Z)({},r),{},{disableClearable:!0,disablePortal:!0,isOptionEqualToValue:function(e,r){return e.value===r.value},options:Q,value:ve.unme_Id,onChange:function(e,r){me("unme_Id",r)},renderInput:function(e){return(0,E.jsx)(_.Z,(0,n.Z)((0,n.Z)({},e),{},{error:!!Ze.unme_Id,InputLabelProps:{shrink:!0}}))}}))]})},name:"unme_Id",control:le})}),(0,E.jsxs)(v.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"right",alignItems:"right"},children:[(0,E.jsx)(h.Z,{startIcon:(0,E.jsx)(f.Z,{children:"checked"}),variant:"contained",color:"primary",type:"submit",style:{borderRadius:"10px",marginRight:"10px"},sx:{backgroundColor:"#634A9E",color:"white","&:hover":{backgroundColor:"#6e52ae"}},onClick:Ie,children:"Guardar"}),(0,E.jsx)(h.Z,{startIcon:(0,E.jsx)(f.Z,{children:"close"}),variant:"contained",color:"primary",style:{borderRadius:"10px"},sx:{backgroundColor:"#DAD8D8",color:"black","&:hover":{backgroundColor:"#BFBABA"}},onClick:function(){b.Z.push("/Lotes/Index")},children:"Cancelar"})]})]})})]})})}},38384:function(e,r,t){var n=t(74165),a=t(15861),o=t(31881),i=t.n(o),s=t(9098);r.Z=function(){var e={XApiKey:s.Z.extraerToken()},r=i().create({baseURL:"https://practicaacademia.somee.com/api/",headers:e}),t=i().create({baseURL:"https://practicaacademia.somee.com/api/PedidosOrdenDetalles/",headers:e}),o=(i().create({baseURL:"https://practicaacademia.somee.com/api/PedidosOrden/",headers:e}),JSON.parse(localStorage.getItem("user"))),c=function(){var e=(0,a.Z)((0,n.Z)().mark((function e(r){var a,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get("Find?prod_Id="+r);case 3:return a=e.sent,o=a.data.data,e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(r){return e.apply(this,arguments)}}();function u(){return(u=(0,a.Z)((0,n.Z)().mark((function e(){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.get("Lotes/Listar");case 3:return t=e.sent,a=t.data.data.map((function(e,r){return{key:r+1,lote_Id:e.lote_Id,mate_Id:e.mate_Id,unme_Id:e.unme_Id,prod_Id:e.prod_Id,lote_Stock:e.lote_Stock,lote_CantIngresada:e.lote_CantIngresada,lote_Observaciones:e.lote_Observaciones,lote_CodigoLote:e.lote_CodigoLote,tipa_Id:e.tipa_Id,colr_Id:e.colr_Id,colr_Nombre:e.colr_Nombre,colr_Codigo:e.colr_Codigo,colr_CodigoHtml:e.colr_CodigoHtml,usuario_UsuarioCreacion:e.usuario_UsuarioCreacion,lote_FechaCreacion:e.lote_FechaCreacion,usua_UsuarioModificacion:e.usua_UsuarioModificacion,lote_FechaModificacion:e.lote_FechaModificacion,usua_UsuarioEliminacion:e.usua_UsuarioEliminacion,lote_FechaEliminacion:e.lote_FechaEliminacion,lote_Estado:e.lote_Estado,unme_Descripcion:e.unme_Descripcion,mate_Descripcion:e.mate_Descripcion,tipa_area:e.tipa_area,peor_Id:e.peor_Id,prov_NombreCompania:e.prov_NombreCompania,prov_NombreContacto:e.prov_NombreContacto,prov_DireccionExacta:e.prov_DireccionExacta,usuarioCreacionNombre:e.usuarioCreacionNombre,usuarioModificacionNombre:e.usuarioModificacionNombre,usuarioEliminacionNombre:e.usuarioEliminacionNombre}})),e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function d(){return(d=(0,a.Z)((0,n.Z)().mark((function e(){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.get("Lotes/Listar");case 3:return t=e.sent,a=t.data.data.map((function(e,r){return{key:r+1,unme_Descripcion:e.unme_Descripcion,mate_Descripcion:e.mate_Descripcion,tipa_area:e.tipa_area,lote_Stock:e.lote_Stock}})),e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function l(){return(l=(0,a.Z)((0,n.Z)().mark((function e(t){var a,i,c,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""==t.prod_Id){e.next=9;break}return a={mate_Id:t.mate_Id.value,unme_Id:t.unme_Id.value,prod_Id:t.prod_Id,colr_Id:t.colr_Id.value,lote_Stock:t.cantidadIngresada,lote_CodigoLote:t.lote_CodigoLote.trim(),lote_Observaciones:t.lote_Observaciones.trim(),tipa_Id:t.tipa_Id.value,usua_UsuarioCreacion:o.uuid,lote_FechaCreacion:s.Z.formatFechaHora(new Date)},e.next=5,r.post("Lotes/Insertar",a);case 5:return i=e.sent,e.abrupt("return",i);case 9:return c={mate_Id:t.mate_Id.value,unme_Id:t.unme_Id.value,prod_Id:null,colr_Id:t.colr_Id.value,lote_Stock:t.cantidadIngresada,lote_CodigoLote:t.lote_CodigoLote.trim(),lote_Observaciones:t.lote_Observaciones.trim(),tipa_Id:t.tipa_Id.value,usua_UsuarioCreacion:o.uuid,lote_FechaCreacion:s.Z.formatFechaHora(new Date)},e.next=12,r.post("Lotes/Insertar",c);case 12:return u=e.sent,e.abrupt("return",u);case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function p(){return(p=(0,a.Z)((0,n.Z)().mark((function e(t){var a,i,c,u;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,""==t.prod_Id){e.next=9;break}return a={lote_Id:t.lote_Id,mate_Id:t.mate_Id.value,unme_Id:t.unme_Id.value,prod_Id:t.prod_Id,colr_Id:t.colr_Id.value,lote_CodigoLote:t.lote_CodigoLote.trim(),lote_Stock:t.lote_Stock,lote_Observaciones:t.lote_Observaciones.trim(),tipa_Id:t.tipa_Id.value,usua_UsuarioModificacion:o.uuid,lote_FechaModificacion:s.Z.formatFechaHora(new Date)},e.next=5,r.post("Lotes/Editar",a);case 5:return i=e.sent,e.abrupt("return",i);case 9:return c={lote_Id:t.lote_Id,mate_Id:t.mate_Id.value,unme_Id:t.unme_Id.value,prod_Id:null,colr_Id:t.colr_Id.value,lote_CodigoLote:t.lote_CodigoLote.trim(),lote_Stock:t.lote_Stock,lote_Observaciones:t.lote_Observaciones.trim(),tipa_Id:t.tipa_Id.value,usua_UsuarioModificacion:o.uuid,lote_FechaModificacion:s.Z.formatFechaHora(new Date)},e.next=12,r.post("Lotes/Editar",c);case 12:return u=e.sent,e.abrupt("return",u);case 14:e.next=18;break;case 16:e.prev=16,e.t0=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function _(){return(_=(0,a.Z)((0,n.Z)().mark((function e(t){var a,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={lote_Id:t.id,usua_UsuarioEliminacion:o.uuid,lote_FechaEliminacion:s.Z.formatFechaHora(new Date)},e.next=4,r.post("Lotes/Eliminar",a);case 4:return i=e.sent,e.abrupt("return",i);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function m(){return(m=(0,a.Z)((0,n.Z)().mark((function e(){var t,a;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.get("UnidadMedidas/Listar?unme_EsAduana="+o.esAduana.toString());case 3:return t=e.sent,a=t.data.data.map((function(e){return{value:e.unme_Id,label:"".concat(e.unme_Descripcion)}})),e.abrupt("return",a);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return{listar:function(){return u.apply(this,arguments)},crear:function(e){return l.apply(this,arguments)},editar:function(e){return p.apply(this,arguments)},eliminar:function(e){return _.apply(this,arguments)},getPedidosOrdenDetallesInfo:c,UnidadMedida:function(){return m.apply(this,arguments)},ExportData:function(){return d.apply(this,arguments)}}}},89145:function(e,r,t){t(47313);var n=t(85281),a=t(53191),o=t(46417);r.Z=function(e){var r=(0,o.jsxs)(a.Z,{container:!0,spacing:2,display:"flex",justifyContent:"center",alignContent:"center",marginY:"10px",children:[(0,o.jsx)(a.Z,{item:!0,xs:12,children:(0,o.jsx)(n.Z,{style:{color:"#634a9e"}})}),(0,o.jsx)(a.Z,{item:!0,xs:12,children:"Cargando..."})]});return null==e||e.length>0?null:r}}}]);