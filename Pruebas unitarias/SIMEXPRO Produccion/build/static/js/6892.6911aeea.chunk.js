"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[6892],{57713:function(e,t,n){var r=n(74165),a=n(15861),i=n(31881),o=n.n(i),s=n(9098);t.Z=function(){var e={XApiKey:s.Z.extraerToken()},t=o().create({baseURL:"https://practicaacademia.somee.com/api/Pantallas/",headers:e}),n=JSON.parse(localStorage.getItem("user"));function i(){return(i=(0,a.Z)((0,r.Z)().mark((function e(){var a,i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get("Listar?pant_EsAduana="+n.esAduana.toString());case 3:return a=e.sent,i=a.data||{data:[]},o=i.data.map((function(e,t){return{key:t,pant_Id:e.pant_Id,pant_Nombre:e.pant_Nombre}})),e.abrupt("return",o);case 9:e.prev=9,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function c(){return(c=(0,a.Z)((0,r.Z)().mark((function e(a){var i,o,s,c,u,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,0!==a.length){e.next=7;break}return e.next=4,t.get("Listar?pant_EsAduana="+n.esAduana.toString());case 4:i=e.sent,e.next=13;break;case 7:return e.next=9,t.get("Listar?pant_EsAduana="+n.esAduana.toString());case 9:o=e.sent,s=o.data||{data:[]},c=a.map((function(e){return e.pant_Id})),i={data:{data:s.data.filter((function(e){return!c.includes(e.pant_Id)}))}};case 13:return u=i.data||{data:[]},l=u.data.map((function(e,t){return{key:t,pant_Id:e.pant_Id,pant_Nombre:e.pant_Nombre}})),e.abrupt("return",l);case 18:e.prev=18,e.t0=e.catch(0);case 21:case"end":return e.stop()}}),e,null,[[0,18]])})))).apply(this,arguments)}function u(){return(u=(0,a.Z)((0,r.Z)().mark((function e(a){var i,o,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get("Listar?pant_EsAduana="+n.esAduana.toString());case 3:return i=e.sent,o=i.data||{data:[]},s=[],o.data.map((function(e,t){return a.forEach((function(n){e.pant_Id===n.pant_Id&&(s[t]={key:n.key,pant_Id:n.pant_Id,pant_Nombre:n.pant_Nombre})})),{key:t,pant_Id:e.pant_Id,pant_Nombre:e.pant_Nombre}})),e.abrupt("return",s);case 10:e.prev=10,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}return{ListadoPantallas:function(){return i.apply(this,arguments)},ListadoPantallasRight:function(e){return u.apply(this,arguments)},ListadoPantallasLeft:function(e){return c.apply(this,arguments)}}}},16892:function(e,t,n){n.r(t);var r=n(1413),a=n(74165),i=n(15861),o=n(93433),s=n(29439),c=n(62563),u=n(1550),l=n(5178),p=n(24631),d=n(41727),f=n(71263),h=n(24193),m=n(73428),x=n(93405),Z=n(16957),v=n(44758),_=n(9019),b=n(48310),g=n(90206),y=n(74748),k=n(83213),I=n(82295),j=n(47313),w=n(75627),C=n(58467),N=(n(88282),n(521)),S=n(75265),D=n(3463),A=n(57713),R=n(26057),E=n(46417);function P(e,t){return e.filter((function(e){return-1===t.indexOf(e)}))}function L(e,t){return e.filter((function(e){return-1!==t.indexOf(e)}))}t.default=function(){var e=(0,R.Z)(),t=(0,A.Z)(),n=j.useState([]),O=(0,s.Z)(n,2),F=O[0],M=O[1],U=j.useState([]),B=(0,s.Z)(U,2),H=B[0],J=B[1],z=j.useState([]),K=(0,s.Z)(z,2),T=K[0],W=K[1],V=L(F,H),X=L(F,T),Q=(0,C.TH)().state,q=Q.role,G=Q.nombre,Y=Q.pantallas,$=(0,j.useState)(G),ee=(0,s.Z)($,2),te=(ee[0],ee[1]),ne=D.Ry().shape({role_Descripcion:D.Z_().required()}),re=(0,C.s0)(),ae=function(e){return function(){var t=F.indexOf(e),n=(0,o.Z)(F);-1===t?n.push(e):n.splice(t,1),M(n)}},ie=function(e){return(0,E.jsx)(I.Z,{sx:{width:350,height:250,overflow:"auto",borderColor:"#c6b1c9",borderWidth:1,borderStyle:"solid"},children:(0,E.jsx)(b.Z,{dense:!0,component:"div",role:"list",children:e.map((function(e){var t="transfer-list-item-".concat(e.id,"-label");return(0,E.jsxs)(g.ZP,{role:"listitem",button:!0,onClick:ae(e),children:[(0,E.jsx)(y.Z,{children:(0,E.jsx)(v.Z,{checked:-1!==F.indexOf(e),tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":t}})}),(0,E.jsx)(k.Z,{id:t,primary:" ".concat(e.pant_Nombre)})]},e.id)}))})})};(0,j.useEffect)((function(){fe("role_Descripcion",G),oe(),se()}),[]);var oe=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,0!==T.length){e.next=7;break}return e.next=4,t.ListadoPantallas();case 4:n=e.sent,e.next=10;break;case 7:return e.next=9,t.ListadoPantallasLeft(Y);case 9:n=e.sent;case 10:J(n),e.next=15;break;case 13:e.prev=13,e.t0=e.catch(0);case 15:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.ListadoPantallasRight(Y);case 3:n=e.sent,W(n||[]),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),ce=(0,w.cI)({RolesViewModel:{role_Descripcion:""},mode:"all",resolver:(0,c.X)(ne)}),ue=ce.handleSubmit,le=ce.control,pe=ce.watch,de=ce.formState,fe=ce.setValue,he=de.errors,me=de.isValid,xe=pe(),Ze=function(){var t=(0,i.Z)((0,a.Z)().mark((function t(){var n,r;return(0,a.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=pe(),t.next=3,e.EditarRoles(q,n,T);case 3:return r=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ve=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!me){e.next=11;break}if(0!==T.length){e.next=5;break}(0,S.go)("Seleccione al menos una pantalla."),e.next=9;break;case 5:return e.next=7,Ze();case 7:1==(t=e.sent).data.data.messageStatus?((0,S.xO)("Registro editado exitosamente."),N.Z.push("/Roles/Index")):t.data.data.messageStatus.includes("UNIQUE")?(0,S.go)("El registro ya existe"):(0,S.bW)("Ha ocurrido un error.");case 9:e.next=12;break;case 11:(0,S.KV)("Hay campos vacios.");case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,E.jsx)("form",{onSubmit:ue((function(e){})),children:(0,E.jsxs)(m.Z,{sx:{minWidth:275,margin:"40px"},children:[(0,E.jsx)(Z.Z,{component:"img",height:"200",image:"https://i.ibb.co/gMjB52g/ROLES.png",alt:"Encabezado de la carta"}),(0,E.jsxs)(_.ZP,{container:!0,spacing:3,style:{marginTop:"20px"},children:[(0,E.jsx)(_.ZP,{item:!0,xs:3}),(0,E.jsx)(_.ZP,{item:!0,xs:6,sx:{marginTop:"30px",marginBottom:"20px"},children:(0,E.jsx)(w.Qr,{render:function(e){var t=e.field;return(0,E.jsxs)(u.Z,{error:!!he.role_Descripcion,fullWidth:!0,children:[(0,E.jsx)(l.Z,{className:"font-medium text-10",component:"legend",children:"Descripci\xf3n del rol:"}),(0,E.jsx)(p.Z,(0,r.Z)((0,r.Z)({},t),{},{variant:"outlined",error:!!he.role_Descripcion,fullWidth:!0,value:xe.role_Descripcion,onChange:function(e){t.onChange(e),te(e.target.value)},inputProps:{startadornment:(0,E.jsx)(d.Z,{position:"start"})}}))]})},name:"role_Descripcion",control:le})})]}),(0,E.jsx)(x.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:(0,E.jsxs)(_.ZP,{container:!0,spacing:2,justifyContent:"center",alignItems:"center",children:[(0,E.jsx)(_.ZP,{item:!0,children:ie(H)}),(0,E.jsx)(_.ZP,{item:!0,children:(0,E.jsxs)(_.ZP,{container:!0,direction:"column",alignItems:"center",children:[(0,E.jsx)(h.Z,{sx:{my:.5},variant:"outlined",size:"small",onClick:function(){W(T.concat(H)),J([])},disabled:0===H.length,"aria-label":"move all right",children:"\u226b"}),(0,E.jsx)(h.Z,{sx:{my:.5},variant:"outlined",size:"small",onClick:function(){W(T.concat(V)),J(P(H,V)),M(P(F,V))},disabled:0===V.length,"aria-label":"move selected right",children:">"}),(0,E.jsx)(h.Z,{sx:{my:.5},variant:"outlined",size:"small",onClick:function(){J(H.concat(X)),W(P(T,X)),M(P(F,X))},disabled:0===X.length,"aria-label":"move selected left",children:"<"}),(0,E.jsx)(h.Z,{sx:{my:.5},variant:"outlined",size:"small",onClick:function(){J(H.concat(T)),W([])},disabled:0===T.length,"aria-label":"move all left",children:"\u226a"})]})}),(0,E.jsx)(_.ZP,{item:!0,children:ie(T)})]})}),(0,E.jsxs)(_.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"right",alignItems:"right",marginBottom:"15px",marginRight:"15px"},children:[(0,E.jsx)(h.Z,{startIcon:(0,E.jsx)(f.Z,{children:"check"}),variant:"contained",color:"primary",style:{borderRadius:"10px",marginRight:"10px"},sx:{backgroundColor:"#634A9E",color:"white","&:hover":{backgroundColor:"#6e52ae"}},onClick:ve,type:"submit",children:"Guardar"}),(0,E.jsx)(h.Z,{startIcon:(0,E.jsx)(f.Z,{children:"close"}),variant:"contained",color:"primary",style:{borderRadius:"10px"},sx:{backgroundColor:"#DAD8D8",color:"black","&:hover":{backgroundColor:"#BFBABA"}},onClick:function(e){re("/Roles/Index")},children:"Cancelar"})]})]})})}},26057:function(e,t,n){var r=n(74165),a=n(15861),i=n(31881),o=n.n(i),s=n(9098);t.Z=function(){var e={XApiKey:s.Z.extraerToken()},t=o().create({baseURL:"https://practicaacademia.somee.com/api/Roles/",headers:e}),n=JSON.parse(localStorage.getItem("user"));function i(){return(i=(0,a.Z)((0,r.Z)().mark((function e(){var a,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get("Listar?role_Aduana="+n.esAduana.toString());case 3:return a=e.sent,i=a.data.data.map((function(e,t){var n=JSON.parse(e.detalles),r=null;return n&&(r=n.map((function(e,t){return{key:t+1,pant_Id:e.pant_Id,pant_Nombre:e.pant_Nombre}}))),{key:t+1,role_Id:e.role_Id,role_Descripcion:e.role_Descripcion,aduanero:e.aduanero,detalles:r,usuarioCreacionNombre:e.usuarioCreacionNombre,role_FechaCreacion:e.role_FechaCreacion,usuarioModificadorNombre:e.usuarioModificadorNombre,role_FechaModificacion:e.role_FechaModificacion}})),e.abrupt("return",i);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function c(){return(c=(0,a.Z)((0,r.Z)().mark((function e(){var a,i,o,s,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.get("Listar?role_Aduana="+n.esAduana.toString());case 3:for(a=e.sent,i=a.data.data.map((function(e,t){var n=JSON.parse(e.detalles),r=null;return n&&(r=n.map((function(e,n){return{key:n+1,rolKey:t+1,pant_Nombre:e.pant_Nombre}}))),{key:t+1,role_Descripcion:e.role_Descripcion,detalles:r}})),o=[],s=0;s<i.length;s++){if(i[s].detalles)for(c=0;c<i[s].detalles.length;c++)i[s].key==i[s].detalles[c].rolKey&&(o[s]+=" {No.: ".concat(c+1,", Descripci\xf3n de la pantalla: ").concat(i[s].detalles[c].pant_Nombre,"} "));else o.push("");i[s].detalles=o[s].toString().replace("undefined","")}return e.abrupt("return",i);case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function u(){return(u=(0,a.Z)((0,r.Z)().mark((function e(a,i){var o,c,u,l;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={pantallas:i.map((function(e){return{pant_Id:e.pant_Id}}))},c=JSON.stringify(o),u={role_Descripcion:a.role_Descripcion.trim(),role_Aduana:n.esAduana,pant_Ids:c,usua_UsuarioCreacion:n.uuid,role_FechaCreacion:s.Z.formatFechaHora(new Date)},e.next=6,t.post("Insertar",u);case 6:return l=e.sent,e.abrupt("return",l);case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function l(){return(l=(0,a.Z)((0,r.Z)().mark((function e(a,i,o){var c,u,l,p;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,c={pantallas:o.map((function(e){return{pant_Id:e.pant_Id}}))},u=JSON.stringify(c),l={role_Id:a,role_Descripcion:i.role_Descripcion.trim(),role_Aduana:n.esAduana,pant_Ids:u,usua_UsuarioModificacion:n.uuid,role_FechaModificacion:s.Z.formatFechaHora(new Date)},e.next=6,t.post("Editar",l);case 6:return p=e.sent,e.abrupt("return",p);case 10:e.prev=10,e.t0=e.catch(0);case 12:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}function p(){return(p=(0,a.Z)((0,r.Z)().mark((function e(a){var i,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i={role_Id:a.id,usua_UsuarioEliminacion:n.uuid,role_FechaEliminacion:s.Z.formatFechaHora(new Date)},e.next=4,t.post("Eliminar",i);case 4:return o=e.sent,e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return{CrearRoles:function(e,t){return u.apply(this,arguments)},EditarRoles:function(e,t,n){return l.apply(this,arguments)},ListadoRoles:function(){return i.apply(this,arguments)},EliminarRoles:function(e){return p.apply(this,arguments)},ExportData:function(){return c.apply(this,arguments)}}}}}]);