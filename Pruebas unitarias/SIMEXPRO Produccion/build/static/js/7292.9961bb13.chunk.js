"use strict";(self.webpackChunkfuse_react_app=self.webpackChunkfuse_react_app||[]).push([[7292],{87292:function(e,r,n){n.r(r);var i=n(1413),t=n(74165),o=n(15861),c=n(29439),a=n(62563),l=n(73428),s=n(16957),u=n(93405),_=n(9019),p=n(19536),d=n(66212),m=n(1550),f=n(5178),h=n(24631),x=n(41727),Z=n(61113),v=n(25298),C=n(24193),b=n(71263),N=n(47313),j=n(75627),g=n(51111),k=n.n(g),R=n(31387),P=(n(88282),n(521)),y=n(68673),w=n(75265),E=n(3463),F=n(33171),I=n(46417);r.default=function(){var e=(0,y.Z)(),r=(0,F.Z)(),n=(0,N.useState)([]),g=(0,c.Z)(n,2),T=g[0],S=g[1],A=(0,N.useState)([]),D=(0,c.Z)(A,2),W=D[0],O=D[1],z=(0,N.useState)([]),X=(0,c.Z)(z,2),B=X[0],q=X[1],U=function(){var r=(0,o.Z)((0,t.Z)().mark((function r(){var n;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,e.paises();case 3:n=r.sent,S(n),r.next=9;break;case 7:r.prev=7,r.t0=r.catch(0);case 9:case"end":return r.stop()}}),r,null,[[0,7]])})));return function(){return r.apply(this,arguments)}}(),L=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(n){var i;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!n){e.next=8;break}return e.next=4,r.ProvinciasPorPais(n);case 4:i=e.sent,O(i),e.next=9;break;case 8:O([]);case 9:e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(r){return e.apply(this,arguments)}}();(0,N.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(){var n;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.listar();case 3:n=e.sent,q(n),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();e(),U()}),[]);var Q=function(e,r){return e.some((function(e){return e.clie_RTN===r}))},M=function(e,r){var n=r.toLowerCase();return e.some((function(e){return e.clie_Correo_Electronico.toLowerCase()===n}))},V=function(e,r){return e.some((function(e){return e.clie_Numero_Contacto===r}))},Y=function(e,r){return e.some((function(e){return e.clie_FAX===r&&""!=e.clie_FAX}))},H=E.Ry().shape({id:E.Z_(),clie_Nombre_O_Razon_Social:E.Z_().required(""),clie_Direccion:E.Z_().required(""),clie_RTN:E.Z_().required("").test("formato","RTN incompleto",(function(e){return!!/^\d{4}-\d{4}-\d{6}$/.test(e)})),clie_Nombre_Contacto:E.Z_().required(""),clie_Numero_Contacto:E.Z_().required("").test("formato","N\xfamero de tel\xe9fono incompleto",(function(e){return!!/^\+\d{3} \d{4}-\d{4}$/.test(e)})),provincia:E.Ry().required(""),Pais:E.Ry().required(""),clie_FAX:E.Z_().trim(),clie_Correo_Electronico:E.Z_().trim().required("").email("Debe ingresar un correo electr\xf3nico v\xe1lido")}),K=(0,j.cI)({defaultValues:{id:"",clie_Nombre_O_Razon_Social:"",clie_Direccion:"",clie_RTN:"",clie_Nombre_Contacto:"",clie_Numero_Contacto:"",clie_Correo_Electronico:"",clie_FAX:"",Pais:null,provincia:null},mode:"all",resolver:(0,a.X)(H)}),$=K.handleSubmit,G=(K.register,K.reset,K.control),J=K.watch,ee=K.formState,re=K.setValue,ne=ee.isValid,ie=(ee.dirtyFields,ee.errors),te=(ee.touchedFields,J()),oe=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(B.filter((function(e){return Q(B,te.clie_RTN)||M(B,te.clie_Correo_Electronico)||Y(B,te.clie_FAX)||V(B,te.clie_Numero_Contacto)})).length>0)){e.next=6;break}(0,w.go)("Ya existe un registro con esos datos"),e.next=10;break;case 6:return e.next=8,r.crear(te);case 8:"1"===e.sent.data.data.messageStatus&&(P.Z.push("/Clientes/index"),(0,w.xO)());case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),(0,w.bW)();case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=(0,o.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ne?oe():(0,w.KV)();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,I.jsx)("form",{onSubmit:$((function(e){})),children:(0,I.jsxs)(l.Z,{sx:{minWidth:275,margin:"40px"},children:[(0,I.jsx)(s.Z,{component:"img",height:"200",image:"https://i.ibb.co/0KzPC2w/CLIENTES.png",alt:"Encabezado de la carta"}),(0,I.jsx)(u.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-center"},children:(0,I.jsxs)(_.ZP,{container:!0,spacing:3,children:[(0,I.jsx)(_.ZP,{item:!0,xs:12,style:{marginBottom:"30px"},children:(0,I.jsx)(p.Z,{style:{marginTop:"0px",marginBottom:"0px"},children:(0,I.jsx)(d.Z,{label:"Agregar nuevo cliente"})})}),(0,I.jsx)(_.ZP,{item:!0,xs:6,children:(0,I.jsx)(j.Qr,{render:function(e){var r=e.field;return(0,I.jsxs)(m.Z,{fullWidth:!0,children:[(0,I.jsx)(f.Z,{error:!!ie.clie_Nombre_O_Razon_Social,children:"Nombre o raz\xf3n social:"}),(0,I.jsx)(h.Z,(0,i.Z)((0,i.Z)({},r),{},{error:!!ie.clie_Nombre_O_Razon_Social,variant:"outlined",fullWidth:!0,inputprops:{startadornment:(0,I.jsx)(x.Z,{position:"start"})}}))]})},name:"clie_Nombre_O_Razon_Social",control:G})}),(0,I.jsx)(_.ZP,{item:!0,xs:6,children:(0,I.jsx)(j.Qr,{render:function(e){var r=e.field;return(0,I.jsx)(k(),{mask:"9999-9999-999999",value:te.clie_RTN,onChange:r.onChange,onBlur:function(){r.onBlur(),Q(B,r.value)&&(0,w.go)("Ya existe un registro con ese RTN .")},maskChar:"",children:function(){return(0,I.jsxs)(m.Z,{fullWidth:!0,children:[(0,I.jsx)(f.Z,{error:!!ie.clie_RTN||Q(B,r.value),children:"RTN:"}),(0,I.jsx)(h.Z,(0,i.Z)((0,i.Z)({},r),{},{variant:"outlined",error:!!ie.clie_RTN||Q(B,r.value),fullWidth:!0,inputprops:{startadornment:(0,I.jsx)(x.Z,{position:"start"})}})),ie.clie_RTN&&(0,I.jsx)(Z.Z,{variant:"caption",color:"error",children:ie.clie_RTN.message})]})}})},name:"clie_RTN",control:G})}),(0,I.jsx)(_.ZP,{item:!0,xs:6,children:(0,I.jsx)(j.Qr,{render:function(e){var r=e.field;return(0,I.jsxs)(m.Z,{fullWidth:!0,children:[(0,I.jsx)(f.Z,{error:!!ie.clie_Nombre_Contacto,children:"Nombre de contacto:"}),(0,I.jsx)(h.Z,(0,i.Z)((0,i.Z)({},r),{},{error:!!ie.clie_Nombre_Contacto,variant:"outlined",fullWidth:!0,inputProps:{startadornment:(0,I.jsx)(x.Z,{position:"start"})}}))]})},name:"clie_Nombre_Contacto",control:G})}),(0,I.jsx)(_.ZP,{item:!0,xs:6,children:(0,I.jsx)(j.Qr,{render:function(e){var r=e.field;return(0,I.jsx)(k(),{mask:"+999 9999-9999",value:te.clie_Numero_Contacto,onChange:r.onChange,onBlur:function(){r.onBlur(),V(B,r.value)&&(0,w.go)("Ya existe un registro con el n\xfamero de contacto.")},maskChar:"",children:function(){return(0,I.jsxs)(m.Z,{fullWidth:!0,children:[(0,I.jsx)(f.Z,{error:!!ie.clie_Numero_Contacto||V(B,r.value),children:"N\xfamero telef\xf3nico del nombre de contacto:"}),(0,I.jsx)(h.Z,(0,i.Z)((0,i.Z)({},r),{},{variant:"outlined",error:!!ie.clie_Numero_Contacto||V(B,r.value),fullWidth:!0,inputprops:{startadornment:(0,I.jsx)(x.Z,{position:"start"})}})),ie.clie_Numero_Contacto&&(0,I.jsx)(Z.Z,{variant:"caption",color:"error",children:ie.clie_Numero_Contacto.message})]})}})},name:"clie_Numero_Contacto",control:G})}),(0,I.jsx)(_.ZP,{item:!0,xs:6,children:(0,I.jsx)(j.Qr,{render:function(e){var r=e.field;return(0,I.jsxs)(m.Z,{fullWidth:!0,children:[(0,I.jsx)(f.Z,{error:Y(B,r.value),children:"N\xfamero de Fax:"}),(0,I.jsx)(h.Z,(0,i.Z)((0,i.Z)({type:"number"},r),{},{error:Y(B,r.value),variant:"outlined",fullWidth:!0,onChange:r.onChange,onBlur:function(){r.onBlur(),Y(B,r.value)&&(0,w.go)("Ya existe un registro con el n\xfamero de Fax.")},inputProps:{maxLength:20,startAdornment:(0,I.jsx)(x.Z,{position:"start"})}}))]})},name:"clie_FAX",control:G})}),(0,I.jsx)(_.ZP,{item:!0,xs:6,children:(0,I.jsx)(j.Qr,{render:function(e){var r=e.field;return(0,I.jsxs)(m.Z,{fullWidth:!0,children:[(0,I.jsx)(f.Z,{error:!!ie.clie_Correo_Electronico||M(B,r.value),children:" Correo Electr\xf3nico:"}),(0,I.jsx)(h.Z,(0,i.Z)((0,i.Z)({},r),{},{error:!!ie.clie_Correo_Electronico||M(B,r.value),variant:"outlined",fullWidth:!0,onChange:r.onChange,onBlur:function(){r.onBlur(),M(B,r.value)&&(0,w.go)("Ya existe un registro con el correo electr\xf3nico.")},inputProps:{startadornment:(0,I.jsx)(x.Z,{position:"start"})}})),ie.clie_Correo_Electronico&&(0,I.jsx)(Z.Z,{variant:"caption",color:"error",children:ie.clie_Correo_Electronico.message})]})},name:"clie_Correo_Electronico",control:G})}),(0,I.jsx)(_.ZP,{item:!0,xs:6,children:(0,I.jsx)(j.Qr,{name:"Pais",control:G,render:function(e){var r,n=e.field;return(0,I.jsxs)(m.Z,{fullWidth:!0,children:[(0,I.jsx)(f.Z,{error:!!ie.Pais,children:"Pa\xeds:"}),(0,I.jsx)(v.Z,(0,i.Z)((0,i.Z)({},n),{},{disablePortal:!0,isOptionEqualToValue:function(e,r){return e.value===r.value},id:"Pais",options:T,disableClearable:!0,value:null!==(r=te.Pais)&&void 0!==r?r:null,onChange:function(){var e=(0,o.Z)((0,t.Z)().mark((function e(r,n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re("Pais",n),re("provincia",null),L(null===n||void 0===n?void 0:n.value),n||re("pvin_Id",[]);case 4:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),renderInput:function(e){return(0,I.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{error:!!ie.Pais,InputLabelProps:{shrink:!0}}))}}))]})}})}),(0,I.jsx)(_.ZP,{item:!0,xs:6,children:(0,I.jsx)(j.Qr,{name:"provincia",control:G,render:function(e){var r,n=e.field;return(0,I.jsxs)(m.Z,{fullWidth:!0,children:[(0,I.jsx)(f.Z,{error:!!ie.provincia,children:"Provincias:"}),(0,I.jsx)(v.Z,(0,i.Z)((0,i.Z)({},n),{},{disablePortal:!0,isOptionEqualToValue:function(e,r){return e.value===r.value},id:"provincia",options:W,disableClearable:!0,value:null!==(r=te.provincia)&&void 0!==r?r:null,onChange:function(){var e=(0,o.Z)((0,t.Z)().mark((function e(r,n){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:re("provincia",n);case 1:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),renderInput:function(e){return(0,I.jsx)(h.Z,(0,i.Z)((0,i.Z)({},e),{},{error:!!ie.provincia,InputLabelProps:{shrink:!0}}))}}))]})}})}),(0,I.jsx)(_.ZP,{item:!0,xs:12,children:(0,I.jsx)(j.Qr,{render:function(e){var r=e.field;return(0,I.jsxs)(m.Z,{fullWidth:!0,children:[(0,I.jsx)(f.Z,{error:!!ie.clie_Direccion,children:"Direcci\xf3n :"}),(0,I.jsx)(h.Z,(0,i.Z)((0,i.Z)({},r),{},{variant:"outlined",error:!!ie.clie_Direccion,fullWidth:!0,inputprops:{startadornment:(0,I.jsx)(x.Z,{position:"start"})}}))]})},name:"clie_Direccion",control:G})}),(0,I.jsxs)(_.ZP,{item:!0,xs:12,sx:{display:"flex",justifyContent:"right",alignItems:"right"},children:[(0,I.jsx)(C.Z,{startIcon:(0,I.jsx)(b.Z,{children:"checked"}),variant:"contained",color:"primary",type:"submit",style:{borderRadius:"10px",marginRight:"10px"},sx:{backgroundColor:"#634A9E",color:"white","&:hover":{backgroundColor:"#6e52ae"}},onClick:ce,children:"Guardar"}),(0,I.jsx)(C.Z,{startIcon:(0,I.jsx)(b.Z,{children:"close"}),variant:"contained",color:"primary",style:{borderRadius:"10px"},sx:{backgroundColor:"#DAD8D8",color:"black","&:hover":{backgroundColor:"#BFBABA"}},onClick:function(){P.Z.push("/Clientes/Index")},children:"Cancelar"})]})]})}),(0,I.jsx)(R.Ix,{})]})})}},33171:function(e,r,n){var i=n(74165),t=n(15861),o=n(31881),c=n.n(o),a=n(9098);r.Z=function(){var e={XApiKey:a.Z.extraerToken()},r=c().create({baseURL:"https://practicaacademia.somee.com/api/",headers:e}),n=JSON.parse(localStorage.getItem("user"));function o(){return(o=(0,t.Z)((0,i.Z)().mark((function e(){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.get("Clientes/Listar");case 3:return n=e.sent,t=n.data.data.map((function(e,r){return{key:r+1,clie_Id:e.clie_Id,clie_Nombre_O_Razon_Social:e.clie_Nombre_O_Razon_Social,clie_Direccion:e.clie_Direccion,clie_RTN:e.clie_RTN,clie_Nombre_Contacto:e.clie_Nombre_Contacto,clie_Numero_Contacto:e.clie_Numero_Contacto,clie_Correo_Electronico:e.clie_Correo_Electronico,clie_FAX:e.clie_FAX,pvin_Id:e.pvin_Id,pais_Id:e.pais_Id,pais_Nombre:e.pais_Nombre,pvin_Nombre:e.pvin_Nombre,usua_UsuarioCreacion:e.usua_UsuarioCreacion,usuarioNombreCreacion:e.usuarioNombreCreacion,clie_FechaCreacion:e.clie_FechaCreacion,usua_UsuarioModificacion:e.usua_UsuarioModificacion,usuarioNombreModificacion:e.usuarioNombreModificacion,clie_FechaModificacion:e.clie_FechaModificacion,usua_UsuarioEliminacion:e.usua_UsuarioEliminacion,usuarioNombreEliminacion:e.usuarioNombreEliminacion,clie_FechaEliminacion:e.clie_FechaEliminacion}})),e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function l(){return(l=(0,t.Z)((0,i.Z)().mark((function e(){var n,t;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.get("Clientes/Listar");case 3:return n=e.sent,t=n.data.data.map((function(e,r){return{key:r+1,clie_Nombre_O_Razon_Social:e.clie_Nombre_O_Razon_Social,clie_RTN:e.clie_RTN,clie_Nombre_Contacto:e.clie_Nombre_Contacto,clie_Correo_Electronico:e.clie_Correo_Electronico}})),e.abrupt("return",t);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function s(){return(s=(0,t.Z)((0,i.Z)().mark((function e(t){var o,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={clie_Nombre_O_Razon_Social:t.clie_Nombre_O_Razon_Social.trim().replace(/\s+/g," "),clie_Direccion:t.clie_Direccion.trim().replace(/\s+/g," "),clie_RTN:t.clie_RTN,clie_Nombre_Contacto:t.clie_Nombre_Contacto.trim().replace(/\s+/g," "),clie_Numero_Contacto:t.clie_Numero_Contacto,clie_Correo_Electronico:t.clie_Correo_Electronico.trim().replace(/\s+/g," "),clie_FAX:t.clie_FAX,pvin_Id:t.provincia.value,usua_UsuarioCreacion:n.uuid,clie_FechaCreacion:a.Z.formatFechaHora(new Date)},e.next=4,r.post("Clientes/Insertar",o);case 4:return c=e.sent,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function u(){return(u=(0,t.Z)((0,i.Z)().mark((function e(t){var o,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={clie_Id:t.clie_Id,clie_Nombre_O_Razon_Social:t.clie_Nombre_O_Razon_Social.trim().replace(/\s+/g," "),clie_Direccion:t.clie_Direccion.trim().replace(/\s+/g," "),clie_RTN:t.clie_RTN,clie_Nombre_Contacto:t.clie_Nombre_Contacto.trim().replace(/\s+/g," "),clie_Numero_Contacto:t.clie_Numero_Contacto,clie_Correo_Electronico:t.clie_Correo_Electronico.trim().replace(/\s+/g," "),clie_FAX:t.clie_FAX,pvin_Id:t.pvin_Id.value,usua_UsuarioModificacion:n.uuid,clie_FechaModificacion:a.Z.formatFechaHora(new Date)},e.next=4,r.post("Clientes/Editar",o);case 4:return c=e.sent,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function _(){return(_=(0,t.Z)((0,i.Z)().mark((function e(t){var o,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o={clie_Id:t.clie_Id,usua_UsuarioEliminacion:n.uuid,clie_FechaEliminacion:a.Z.formatFechaHora(new Date)},e.next=4,r.post("Clientes/Eliminar",o);case 4:return c=e.sent,e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function p(){return(p=(0,t.Z)((0,i.Z)().mark((function e(t){var o,c;return(0,i.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.get("Provincias/ProvinciasFiltradaPorPaisYesAduana?pais_Id=".concat(t,"&pvin_EsAduana=").concat(n.esAduana));case 3:return o=e.sent,c=o.data.data.map((function(e){return{value:e.pvin_Id,label:"".concat(e.pvin_Nombre)}})),e.abrupt("return",c);case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return{listar:function(){return o.apply(this,arguments)},crear:function(e){return s.apply(this,arguments)},editar:function(e){return u.apply(this,arguments)},eliminar:function(e){return _.apply(this,arguments)},ExportData:function(){return l.apply(this,arguments)},ProvinciasPorPais:function(e){return p.apply(this,arguments)}}}}}]);